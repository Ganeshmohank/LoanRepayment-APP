{"ast":null,"code":"import { Emi } from 'src/app/model/emi';\nimport { Payment } from 'src/app/model/payment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/payment-service/payment.service\";\nimport * as i3 from \"src/app/services/routing.service\";\nimport * as i4 from \"src/app/services/advance-payment-service/advancepayment-service.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/grid-list\";\nimport * as i9 from \"@angular/material/slider\";\nimport * as i10 from \"@angular/material/divider\";\n\nfunction SpecificPaymentHistoryComponent_mat_card_title_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-title\", 13)(1, \"mat-icon\", 14);\n    i0.ɵɵtext(2, \"block\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction SpecificPaymentHistoryComponent_mat_card_title_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-title\", 13)(1, \"mat-icon\", 15);\n    i0.ɵɵtext(2, \"check_circle_outline\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction SpecificPaymentHistoryComponent_mat_card_content_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-content\");\n    i0.ɵɵelement(1, \"mat-slider\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"max\", ctx_r2.emi.remaining_amount);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r2.final.amountpaid);\n  }\n}\n\nfunction SpecificPaymentHistoryComponent_mat_grid_list_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-grid-list\", 9)(1, \"mat-grid-tile\");\n    i0.ɵɵtext(2, \"Paid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-grid-tile\");\n    i0.ɵɵtext(4, \"Remaining\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction SpecificPaymentHistoryComponent_mat_grid_list_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-grid-list\", 9)(1, \"mat-grid-tile\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-grid-tile\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.final.amountpaid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.emi.remaining_amount - ctx_r4.final.amountpaid < 0 ? 0 : ctx_r4.emi.remaining_amount - ctx_r4.final.amountpaid);\n  }\n}\n\nexport let SpecificPaymentHistoryComponent = /*#__PURE__*/(() => {\n  class SpecificPaymentHistoryComponent {\n    constructor(activatedRoute, paymentservice, routingservice, advancepayment) {\n      this.activatedRoute = activatedRoute;\n      this.paymentservice = paymentservice;\n      this.routingservice = routingservice;\n      this.advancepayment = advancepayment;\n      this.final = new Payment();\n      this.emi = new Emi();\n      this.totalamount = this.emi.emi_amount;\n      this.paid = this.emi.emi_amount - this.emi.remaining_amount;\n      this.previous_remaining = this.emi.remaining_amount;\n      this.Remaining = this.emi.remaining_amount;\n      this.transactionid = this.activatedRoute.snapshot.paramMap.get('trxn')?.toString();\n    }\n\n    ngOnInit() {\n      // console.log(this.transactionid);\n      this.paymentservice.fetchpaymentsbycustid(this.transactionid).subscribe(res => {\n        console.log(res);\n\n        if (res.transaction_no != this.transactionid) {\n          alert(\"Transaction doesn't exists\");\n        } else {\n          this.final = res;\n          this.advancepayment.getEmiDb(this.final.loanaccno).subscribe(res => {\n            this.emi = res;\n            console.log(this.emi.remaining_amount);\n          });\n        }\n      }, error => {\n        console.error('error caught in component');\n        this.routingservice.accessLogin();\n      }); // this.advancepayment.getEmiDb(this.final.loanaccno).subscribe(res=>{\n      //   this.emi=res;\n      //   console.log(\"emi\"+res);\n      // },(error) => {                              //Error callback\n      //   console.error('error caught in component')\n      //   this.routingservice.accessLogin();\n      // });\n    }\n\n  }\n\n  SpecificPaymentHistoryComponent.ɵfac = function SpecificPaymentHistoryComponent_Factory(t) {\n    return new (t || SpecificPaymentHistoryComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PaymentService), i0.ɵɵdirectiveInject(i3.RoutingService), i0.ɵɵdirectiveInject(i4.AdvancepaymentServiceService));\n  };\n\n  SpecificPaymentHistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SpecificPaymentHistoryComponent,\n    selectors: [[\"app-specific-payment-history\"]],\n    decls: 61,\n    vars: 19,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"http-equiv\", \"X-UA-Compatible\", \"content\", \"IE=edge\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"specificpaymentdetails\"], [1, \"header\"], [\"class\", \"icon\", 4, \"ngIf\"], [1, \"subtitle\"], [1, \"classFontColor\"], [\"cols\", \"2\", \"rowHeight\", \"3vh\"], [2, \"color\", \"black\"], [4, \"ngIf\"], [\"cols\", \"2\", \"rowHeight\", \"3vh\", 4, \"ngIf\"], [1, \"icon\"], [2, \"color\", \"#FF0000\"], [2, \"color\", \"green\"], [\"disabled\", \"\", \"color\", \"#401664\", \"min\", \"0\", 1, \"subtitle\", 3, \"max\", \"value\"]],\n    template: function SpecificPaymentHistoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2)(4, \"meta\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"body\")(6, \"div\")(7, \"div\", 4)(8, \"mat-card\")(9, \"mat-card-header\", 5);\n        i0.ɵɵtemplate(10, SpecificPaymentHistoryComponent_mat_card_title_10_Template, 3, 0, \"mat-card-title\", 6);\n        i0.ɵɵtemplate(11, SpecificPaymentHistoryComponent_mat_card_title_11_Template, 3, 0, \"mat-card-title\", 6);\n        i0.ɵɵelementStart(12, \"mat-card-title\");\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"mat-card-subtitle\", 7);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"mat-divider\")(17, \"br\");\n        i0.ɵɵelementStart(18, \"mat-card-content\", 8)(19, \"mat-grid-list\", 9)(20, \"mat-grid-tile\");\n        i0.ɵɵtext(21, \"Loan Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"mat-grid-tile\", 10);\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"mat-card-content\", 8)(25, \"mat-grid-list\", 9)(26, \"mat-grid-tile\");\n        i0.ɵɵtext(27, \"Customer Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"mat-grid-tile\", 10);\n        i0.ɵɵtext(29);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(30, \"mat-card-content\", 8)(31, \"mat-grid-list\", 9)(32, \"mat-grid-tile\");\n        i0.ɵɵtext(33, \"Transaction Id\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"mat-grid-tile\", 10);\n        i0.ɵɵtext(35);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(36, \"mat-card-content\", 8)(37, \"mat-grid-list\", 9)(38, \"mat-grid-tile\");\n        i0.ɵɵtext(39, \"Timestamp\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"mat-grid-tile\", 10);\n        i0.ɵɵtext(41);\n        i0.ɵɵpipe(42, \"date\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(43, \"mat-card-content\", 8)(44, \"mat-grid-list\", 9)(45, \"mat-grid-tile\");\n        i0.ɵɵtext(46, \"Payment Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"mat-grid-tile\", 10);\n        i0.ɵɵtext(48);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(49, \"mat-card-content\", 8)(50, \"mat-grid-list\", 9)(51, \"mat-grid-tile\");\n        i0.ɵɵtext(52, \"Payment Amount\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"mat-grid-tile\", 10);\n        i0.ɵɵtext(54);\n        i0.ɵɵpipe(55, \"currency\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(56, \"mat-divider\")(57, \"br\");\n        i0.ɵɵtemplate(58, SpecificPaymentHistoryComponent_mat_card_content_58_Template, 2, 2, \"mat-card-content\", 11);\n        i0.ɵɵtemplate(59, SpecificPaymentHistoryComponent_mat_grid_list_59_Template, 5, 0, \"mat-grid-list\", 12);\n        i0.ɵɵtemplate(60, SpecificPaymentHistoryComponent_mat_grid_list_60_Template, 5, 2, \"mat-grid-list\", 12);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.final.payment_status === \"failed\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.final.payment_status === \"success\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Payment \", ctx.final.payment_status, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"We've received your \", -ctx.emi.emi_amount + ctx.emi.remaining_amount, \" payment, Alexander\");\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.final.loanaccno);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.final.custid);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.final.transaction_no);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(42, 13, ctx.final.time_payment_atempted, \"dd/MM/YYYY\"));\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.final.payment_status);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(55, 16, ctx.final.amountpaid, \"INR\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.final.payment_status == \"success\" && ctx.emi.remaining_amount != 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.final.payment_status == \"success\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.final.payment_status == \"success\");\n      }\n    },\n    dependencies: [i5.NgIf, i6.MatCard, i6.MatCardHeader, i6.MatCardContent, i6.MatCardTitle, i6.MatCardSubtitle, i7.MatIcon, i8.MatGridList, i8.MatGridTile, i9.MatSlider, i10.MatDivider, i5.CurrencyPipe, i5.DatePipe],\n    styles: [\"mat-card[_ngcontent-%COMP%]{width:50%;display:block;margin-left:auto;margin-right:auto}.mat-icon[_ngcontent-%COMP%]{transform:scale(2)}.classColor[_ngcontent-%COMP%]{color:#42145f}.icon[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;padding-bottom:10%}.header[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;padding-bottom:1%}.subtitle[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center}.mat-grid-tile[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}@media only screen and (max-width: 430px){mat-card[_ngcontent-%COMP%]{margin-top:10vh;width:95%}}\"]\n  });\n  return SpecificPaymentHistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}