{"ast":null,"code":"import * as XLSX from 'xlsx';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/routing.service\";\nimport * as i2 from \"src/app/services/savingshistory/savingshistory.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/button\";\n\nconst _c0 = function (a1) {\n  return [\"./specificsavingshistory\", a1];\n};\n\nfunction SavingshistoryComponent_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 13);\n    i0.ɵɵtext(11, \"Details\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const payment_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(payment_r1.transaction_no);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(payment_r1.time_payment_atempted);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(payment_r1.savingsaccno);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(payment_r1.payment_status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c0, payment_r1.transaction_no));\n  }\n}\n\nexport let SavingshistoryComponent = /*#__PURE__*/(() => {\n  class SavingshistoryComponent {\n    constructor(routingservice, savingshistory) {\n      this.routingservice = routingservice;\n      this.savingshistory = savingshistory;\n      this.final = [];\n      this.fileName = 'ExcelSheet.xlsx';\n      this.currentloggedinuser = this.routingservice.getLoggedInUser();\n    }\n\n    exportexcel() {\n      /* pass here the table id */\n      let element = document.getElementById('excel_table');\n      const ws = XLSX.utils.table_to_sheet(element);\n      /* generate workbook and add the worksheet */\n\n      const wb = XLSX.utils.book_new();\n      XLSX.utils.book_append_sheet(wb, ws, 'Sheet1');\n      /* save to file */\n\n      XLSX.writeFile(wb, this.fileName);\n    }\n\n    ngOnInit() {\n      if (!localStorage.getItem('foo')) {\n        localStorage.setItem('foo', 'no reload');\n        location.reload();\n      } else {\n        localStorage.removeItem('foo');\n      }\n\n      console.log(this.currentloggedinuser);\n      this.savingshistory.fetchpayments(this.currentloggedinuser).subscribe(res => {\n        console.log(\"resulttttt\" + res);\n        res.filter(obj => {\n          if (obj.custid == this.currentloggedinuser) {\n            this.final.push(obj);\n            console.log(\"Dateee\" + new Date());\n          }\n        });\n        this.final.sort((obj2, obj1) => {\n          return obj2.transaction_no - obj1.transaction_no;\n        }).reverse();\n      }, error => {\n        console.error('error caught in component');\n        this.routingservice.accessLogin();\n      });\n    }\n\n  }\n\n  SavingshistoryComponent.ɵfac = function SavingshistoryComponent_Factory(t) {\n    return new (t || SavingshistoryComponent)(i0.ɵɵdirectiveInject(i1.RoutingService), i0.ɵɵdirectiveInject(i2.SavingshistoryService));\n  };\n\n  SavingshistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SavingshistoryComponent,\n    selectors: [[\"app-savingshistory\"]],\n    decls: 27,\n    vars: 1,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"http-equiv\", \"X-UA-Compatible\", \"content\", \"IE=edge\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"header\"], [1, \"table1\"], [1, \"exportData\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [\"id\", \"excel_table\", 1, \"table2\"], [1, \"thead-dark\"], [\"scope\", \"col\"], [1, \"tbody1\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", 1, \"buttonTHree\", 3, \"routerLink\"]],\n    template: function SavingshistoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2)(4, \"meta\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"body\")(6, \"p\", 4);\n        i0.ɵɵtext(7, \"Savings Payment History\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 5)(9, \"div\", 6)(10, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function SavingshistoryComponent_Template_button_click_10_listener() {\n          return ctx.exportexcel();\n        });\n        i0.ɵɵtext(11, \"Export\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"table\", 8)(13, \"thead\", 9)(14, \"tr\")(15, \"th\", 10);\n        i0.ɵɵtext(16, \"Transaction No\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"th\", 10);\n        i0.ɵɵtext(18, \"Timestamp\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"th\", 10);\n        i0.ɵɵtext(20, \"Account Number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\", 10);\n        i0.ɵɵtext(22, \"Paymentstatus\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"th\", 10);\n        i0.ɵɵtext(24, \"Action\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"tbody\", 11);\n        i0.ɵɵtemplate(26, SavingshistoryComponent_tr_26_Template, 12, 7, \"tr\", 12);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(26);\n        i0.ɵɵproperty(\"ngForOf\", ctx.final);\n      }\n    },\n    dependencies: [i3.NgForOf, i4.RouterLink, i5.MatButton],\n    styles: [\"table[_ngcontent-%COMP%]{width:90%;align-items:center;margin:auto;text-align:center;border-collapse:collapse;max-height:80vh;border-spacing:1vh 1vh;overflow:auto}body[_ngcontent-%COMP%]{overflow:hidden}td.mat-cell[_ngcontent-%COMP%]{padding:2vh}.table1[_ngcontent-%COMP%]{max-height:100vh;padding-bottom:30vh;overflow:hidden;overflow-y:auto}.header[_ngcontent-%COMP%]{padding-top:3vh;padding-bottom:3vh;padding-left:3vh;color:#42145f;font-size:2.5em;font-family:Roboto,Helvetica Neue,sans-serif}.tableheaders[_ngcontent-%COMP%]{color:#1d7b8a;text-align:center;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif}.buttonTHree[_ngcontent-%COMP%]{background-color:#fbba20;border:none;color:#42145f;text-align:center;text-decoration:none;display:inline-block;font-size:2vh;font-family:Roboto,Helvetica Neue,sans-serif}.exportData[_ngcontent-%COMP%]{float:right;margin-right:3vw;bottom:50vh}@media only screen and (max-width: 430px){.table1[_ngcontent-%COMP%]{width:95%;margin:auto;overflow:scroll;font-size:small;height:100vw}.header[_ngcontent-%COMP%]{font-size:2em}table[_ngcontent-%COMP%]{width:120vh;overflow:scroll}body[_ngcontent-%COMP%]{padding-left:70vw;width:100vh;overflow:scroll;transform:rotate(-90deg);height:100vh}.exportData[_ngcontent-%COMP%]{position:absolute;left:180vw;top:5vh}}\"]\n  });\n  return SavingshistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}